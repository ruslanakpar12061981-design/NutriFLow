<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Nutri Flow ‚Äî –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –ø—Ä–∏–≤—ã—á–µ–∫</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root {
      --bg: #050816;
      --card-bg: #0f172a;
      --accent: #22c55e;
      --accent-soft: rgba(34, 197, 94, 0.12);
      --text: #e5e7eb;
      --text-muted: #9ca3af;
      --danger: #f97373;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      background: radial-gradient(circle at top, #1d283a 0, #020617 45%, #000 100%);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      padding: 16px;
    }

    .app {
      width: 100%;
      max-width: 440px;
    }

    .card {
      background: linear-gradient(135deg, rgba(15, 23, 42, 0.96), rgba(15, 23, 42, 0.98));
      border-radius: 18px;
      padding: 18px 16px 16px;
      box-shadow:
        0 18px 40px rgba(15, 23, 42, 0.9),
        0 0 0 1px rgba(148, 163, 184, 0.12);
      backdrop-filter: blur(18px);
    }

    .header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;
    }

    .bot-avatar {
      width: 48px;
      height: 48px;
      border-radius: 16px;
      background: radial-gradient(circle at 30% 20%, #4ade80, #22c55e 35%, #16a34a 70%, #065f46 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.35);
      position: relative;
      overflow: hidden;
    }

    .bot-avatar::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 30% 20%, rgba(255, 255, 255, 0.35), transparent 55%);
      mix-blend-mode: screen;
    }

    .bot-face {
      width: 28px;
      height: 28px;
      border-radius: 40%;
      background: #f9fafb;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    .bot-face::before,
    .bot-face::after {
      content: "";
      position: absolute;
      top: 40%;
      width: 5px;
      height: 5px;
      border-radius: 999px;
      background: #0f172a;
    }

    .bot-face::before { left: 22%; }
    .bot-face::after { right: 22%; }

    .bot-smile {
      position: absolute;
      bottom: 22%;
      width: 14px;
      height: 7px;
      border-radius: 0 0 14px 14px;
      border-bottom: 2px solid #0f172a;
      border-left: 2px solid transparent;
      border-right: 2px solid transparent;
    }

    .header-text h1 {
      font-size: 18px;
      font-weight: 650;
      letter-spacing: 0.02em;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .header-text h1 span {
      font-size: 15px;
      font-weight: 500;
      color: var(--accent);
    }

    .header-text p {
      font-size: 13px;
      color: var(--text-muted);
      margin-top: 2px;
    }

    .pill-row {
      display: flex;
      gap: 6px;
      margin: 10px 0 4px;
      flex-wrap: wrap;
    }

    .pill {
      font-size: 11px;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      color: var(--text-muted);
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .pill--accent {
      border-color: rgba(34, 197, 94, 0.8);
      background: rgba(34, 197, 94, 0.12);
      color: var(--accent);
    }

    .section-title {
      font-size: 13px;
      font-weight: 600;
      margin-top: 12px;
      margin-bottom: 6px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      color: var(--text);
    }

    .section-title span {
      font-size: 11px;
      color: var(--text-muted);
      font-weight: 400;
    }

    .planner {
      padding: 10px;
      border-radius: 14px;
      background: radial-gradient(circle at top left, rgba(148, 163, 184, 0.18), transparent 65%);
      border: 1px solid rgba(51, 65, 85, 0.9);
    }

    .planner-input-row {
      display: flex;
      gap: 8px;
      margin-bottom: 8px;
    }

    .planner-input {
      flex: 1;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      padding: 7px 11px;
      font-size: 12px;
      background: rgba(15, 23, 42, 0.96);
      color: var(--text);
      outline: none;
    }

    .planner-input::placeholder {
      color: rgba(148, 163, 184, 0.8);
    }

    .planner-add-btn {
      border-radius: 999px;
      padding: 7px 10px;
      font-size: 12px;
      border: none;
      background: linear-gradient(135deg, #22c55e, #4ade80);
      color: #052e16;
      font-weight: 600;
      cursor: pointer;
      white-space: nowrap;
      box-shadow: 0 8px 18px rgba(34, 197, 94, 0.35);
    }

    .plan-list {
      max-height: 120px;
      overflow-y: auto;
      margin-top: 4px;
    }

    .plan-empty {
      font-size: 11px;
      color: var(--text-muted);
      padding-top: 2px;
    }

    .plan-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
      padding: 4px 2px;
      font-size: 12px;
      border-radius: 8px;
    }

    .plan-item span.title {
      flex: 1;
      white-space: nowrap;
      text-overflow: ellipsis;
      overflow: hidden;
    }

    .plan-item button {
      border-radius: 999px;
      border: none;
      font-size: 11px;
      padding: 2px 7px;
      background: rgba(15, 23, 42, 0.95);
      color: var(--danger);
      border: 1px solid rgba(248, 113, 113, 0.6);
      cursor: pointer;
    }

    .progress-circle-wrapper {
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 10px 0 6px;
    }

    .progress-circle {
      width: 96px;
      height: 96px;
      border-radius: 50%;
      background: conic-gradient(
        #22c55e 0deg,
        #22c55e 0deg,
        rgba(30, 64, 175, 0.7) 0deg,
        rgba(15, 23, 42, 1) 360deg
      );
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow:
        0 0 0 1px rgba(148, 163, 184, 0.3),
        0 0 20px rgba(34, 197, 94, 0.25);
      position: relative;
    }

    .progress-circle-inner {
      width: 72px;
      height: 72px;
      border-radius: 50%;
      background: radial-gradient(circle at top, #020617, #020617 55%, #000 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
    }

    .progress-percent {
      font-size: 22px;
      font-weight: 650;
    }

    .progress-label {
      font-size: 11px;
      color: var(--text-muted);
    }

    .habits-list {
      margin-top: 6px;
      border-radius: 14px;
      padding: 8px 10px 6px;
      background: radial-gradient(circle at top left, rgba(148, 163, 184, 0.18), transparent 65%);
      border: 1px solid rgba(51, 65, 85, 0.9);
      max-height: 190px;
      overflow-y: auto;
    }

    .habits-empty {
      font-size: 11px;
      color: var(--text-muted);
      padding-top: 2px;
    }

    .habit-item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 6px 4px;
      border-radius: 10px;
      transition: background 0.12s ease, transform 0.08s ease;
      cursor: pointer;
    }

    .habit-item:hover {
      background: rgba(15, 23, 42, 0.88);
    }

    .habit-item.completed {
      background: rgba(22, 163, 74, 0.14);
    }

    .habit-checkbox {
      width: 20px;
      height: 20px;
      border-radius: 7px;
      border: 1px solid rgba(148, 163, 184, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      background: rgba(15, 23, 42, 0.9);
    }

    .habit-item.completed .habit-checkbox {
      border-color: #22c55e;
      background: radial-gradient(circle at top, #4ade80, #16a34a);
      box-shadow: 0 0 10px rgba(34, 197, 94, 0.5);
    }

    .habit-checkbox span {
      font-size: 14px;
      opacity: 0;
      transform: scale(0.5);
      transition: opacity 0.1s ease, transform 0.1s ease;
    }

    .habit-item.completed .habit-checkbox span {
      opacity: 1;
      transform: scale(1);
    }

    .habit-text-main {
      font-size: 13px;
      font-weight: 500;
    }

    .habit-text-sub {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 1px;
    }

    .motivation {
      margin-top: 10px;
      padding: 9px 10px 9px;
      border-radius: 14px;
      background: radial-gradient(circle at top left, var(--accent-soft), transparent 65%);
      border: 1px dashed rgba(34, 197, 94, 0.7);
      font-size: 12px;
      line-height: 1.5;
      color: var(--text-muted);
    }

    .motivation-title {
      font-size: 12px;
      font-weight: 600;
      color: var(--accent);
      margin-bottom: 4px;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .motivation-title span.badge {
      font-size: 10px;
      font-weight: 500;
      padding: 2px 6px;
      border-radius: 999px;
      border: 1px solid rgba(34, 197, 94, 0.6);
      background: rgba(15, 23, 42, 0.95);
      color: var(--accent);
    }

    .quick-actions {
      display: flex;
      gap: 8px;
      margin-top: 10px;
    }

    .btn {
      flex: 1;
      border-radius: 999px;
      padding: 7px 10px;
      font-size: 12px;
      border: none;
      outline: none;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
      transition: transform 0.12s ease, box-shadow 0.12s ease, background 0.12s ease;
    }

    .btn-primary {
      background: linear-gradient(135deg, #22c55e, #4ade80);
      color: #052e16;
      font-weight: 600;
      box-shadow: 0 12px 25px rgba(34, 197, 94, 0.35);
    }

    .btn-secondary {
      background: rgba(15, 23, 42, 0.96);
      color: var(--text-muted);
      border: 1px solid rgba(148, 163, 184, 0.7);
    }

    .btn:active {
      transform: translateY(1px) scale(0.99);
    }

    .footer-note {
      margin-top: 9px;
      text-align: center;
      font-size: 10px;
      color: var(--text-muted);
      opacity: 0.8;
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="card">
      <div class="header">
        <div class="bot-avatar">
          <div class="bot-face">
            <div class="bot-smile"></div>
          </div>
        </div>
        <div class="header-text">
          <h1>Nutri Flow <span>–µ–¥–∞ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</span></h1>
          <p>–°–Ω–∞—á–∞–ª–∞ —Å–ø–ª–∞–Ω–∏—Ä—É–π –ø–æ–ª–µ–∑–Ω—É—é –µ–¥—É, –ø–æ—Ç–æ–º –æ—Ç–º–µ—á–∞–π, —á—Ç–æ —Å—ä–µ–ª üíö</p>
        </div>
      </div>

      <div class="pill-row">
        <div class="pill pill--accent">üß© –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫</div>
      </div>

      <!-- –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –ø—Ä–∏–≤—ã—á–µ–∫ -->
      <div class="section-title">
        –ü–ª–∞–Ω –µ–¥—ã
        <span>—Å–æ–∑–¥–∞–π —Å–≤–æ–π —Å–ø–∏—Å–æ–∫</span>
      </div>
      <div class="planner">
        <div class="planner-input-row">
          <input
            id="habitInput"
            class="planner-input"
            type="text"
            placeholder="–ö–∞–∫—É—é –µ–¥—É –µ–¥–∏–º —Å–µ–≥–æ–¥–Ω—è?"
          />
          <button class="planner-add-btn" id="addHabitBtn">–î–æ–±–∞–≤–∏—Ç—å</button>
        </div>
        <div id="planList" class="plan-list"></div>
        <div id="planEmpty" class="plan-empty">
          –ü–æ–∫–∞ –µ–¥—ã –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –Ω–µ—Ç.
        </div>
      </div>

      <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å –∏ —á–µ–∫-–ª–∏—Å—Ç -->
      <div class="section-title">
        –°–µ–≥–æ–¥–Ω—è
        <span id="dateLabel"></span>
      </div>

      <div class="progress-circle-wrapper">
        <div class="progress-circle" id="progressCircle">
          <div class="progress-circle-inner">
            <div class="progress-percent" id="progressPercent">0%</div>
            <div class="progress-label">–≤—ã–ø–æ–ª–Ω–µ–Ω–æ</div>
          </div>
        </div>
      </div>

      <div class="habits-list">
        <div id="habitsEmpty" class="habits-empty">
          –°–Ω–∞—á–∞–ª–∞ –¥–æ–±–∞–≤—å—Ç–µ –µ–¥—É –≤ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–µ –≤—ã—à–µ üí´
        </div>
        <div id="habitsList"></div>
      </div>

      <div class="motivation">
        <div class="motivation-title">
          üí¨ –ú—è–≥–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
          <span class="badge">–±–µ–∑ –¥–∞–≤–ª–µ–Ω–∏—è</span>
        </div>
        <p id="motivationText">
          –°–µ–≥–æ–¥–Ω—è –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤—Å—ë. –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —á–µ—Å—Ç–Ω–æ –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å ‚Äî –∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –∑–∞–≤—Ç—Ä–∞.
        </p>
      </div>

      <div class="quick-actions">
        <button class="btn btn-primary" id="openBotBtn">–û—Ç–∫—Ä—ã—Ç—å –±–æ—Ç–∞ Nutri Flow</button>
        <button class="btn btn-secondary" id="tipBtn">–°–æ–≤–µ—Ç üí°</button>
      </div>

      <div class="footer-note">
        –ï–¥–∞ –∏ –≥–∞–ª–æ—á–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —ç—Ç–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ (localStorage).<br />
        –î–ª—è —É—á—ë—Ç–∞ –≤–µ—Å–∞ –∏ –∫–∞–ª–æ—Ä–∏–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Telegram-–±–æ—Ç–∞ <b>@Nutri_Flow_Floud_Bot</b>.
      </div>
    </div>
  </div>

  <script>
    const PLAN_KEY = "nutriflow_habits_plan";
    const STATE_KEY = "nutriflow_habits_state";

    const habitInput = document.getElementById("habitInput");
    const addHabitBtn = document.getElementById("addHabitBtn");
    const planList = document.getElementById("planList");
    const planEmpty = document.getElementById("planEmpty");

    const habitsList = document.getElementById("habitsList");
    const habitsEmpty = document.getElementById("habitsEmpty");

    const progressCircle = document.getElementById("progressCircle");
    const progressPercent = document.getElementById("progressPercent");
    const dateLabel = document.getElementById("dateLabel");

    const motivationText = document.getElementById("motivationText");
    const tipBtn = document.getElementById("tipBtn");
    const openBotBtn = document.getElementById("openBotBtn");

    const tips = [
      "–ú–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å —Å –æ–¥–Ω–æ–π-–¥–≤—É—Ö –ø—Ä–∏–≤—ã—á–µ–∫ ‚Äî —ç—Ç–æ —É–∂–µ –º–Ω–æ–≥–æ üíö",
      "–ï—Å–ª–∏ —Å–µ–≥–æ–¥–Ω—è —á—Ç–æ-—Ç–æ –Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å ‚Äî —ç—Ç–æ –æ–ø—ã—Ç, –∞ –Ω–µ –ø—Ä–æ–≤–∞–ª üôÇ",
      "–û—Ç–º–µ—á–∞—Ç—å —á–µ—Å—Ç–Ω–æ, –¥–∞–∂–µ –µ—Å–ª–∏ –º–∞–ª–æ ‚Äî —Ç–æ–∂–µ –ø—Ä–∏–≤—ã—á–∫–∞ –∑–∞–±–æ—Ç—ã –æ —Å–µ–±–µ üåø",
      "–ú–∞–ª–µ–Ω—å–∫–∏–µ —à–∞–≥–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –¥–∞—é—Ç –±–æ–ª—å—à–µ, —á–µ–º –æ–¥–∏–Ω –∏–¥–µ–∞–ª—å–Ω—ã–π —Ä—ã–≤–æ–∫ üí™",
      "–ò–Ω–æ–≥–¥–∞ –ª—É—á—à–∞—è –ø—Ä–∏–≤—ã—á–∫–∞ –¥–Ω—è ‚Äî –ª–µ—á—å —Å–ø–∞—Ç—å —á—É—Ç—å —Ä–∞–Ω—å—à–µ üò¥",
    ];

    function getTodayKey() {
      const d = new Date();
      return d.toISOString().slice(0, 10); // YYYY-MM-DD
    }

    function loadPlan() {
      try {
        const raw = localStorage.getItem(PLAN_KEY);
        if (!raw) return [];
        const arr = JSON.parse(raw);
        if (!Array.isArray(arr)) return [];
        return arr;
      } catch (e) {
        return [];
      }
    }

    function savePlan(plan) {
      localStorage.setItem(PLAN_KEY, JSON.stringify(plan));
    }

    function loadState() {
      try {
        const raw = localStorage.getItem(STATE_KEY);
        if (!raw) return { date: getTodayKey(), completed: {} };
        const st = JSON.parse(raw);
        if (st.date !== getTodayKey()) {
          return { date: getTodayKey(), completed: {} };
        }
        return st;
      } catch (e) {
        return { date: getTodayKey(), completed: {} };
      }
    }

    function saveState(state) {
      localStorage.setItem(STATE_KEY, JSON.stringify(state));
    }

    function renderPlan() {
      const plan = loadPlan();
      planList.innerHTML = "";

      if (plan.length === 0) {
        planEmpty.style.display = "block";
      } else {
        planEmpty.style.display = "none";
      }

      plan.forEach(habit => {
        const row = document.createElement("div");
        row.className = "plan-item";

        const titleSpan = document.createElement("span");
        titleSpan.className = "title";
        titleSpan.textContent = habit.title;

        const delBtn = document.createElement("button");
        delBtn.textContent = "—É–¥–∞–ª–∏—Ç—å";
        delBtn.addEventListener("click", () => {
          const updated = loadPlan().filter(h => h.id !== habit.id);
          savePlan(updated);
          const st = loadState();
          delete st.completed[habit.id];
          saveState(st);
          renderPlan();
          renderToday();
        });

        row.appendChild(titleSpan);
        row.appendChild(delBtn);
        planList.appendChild(row);
      });
    }

    function updateProgress(plan, state) {
      const total = plan.length;
      const completedCount = total === 0
        ? 0
        : plan.filter(h => state.completed[h.id]).length;

      const progress = total === 0 ? 0 : Math.round((completedCount / total) * 100);
      progressPercent.textContent = progress + "%";

      const angle = (progress / 100) * 360;
      progressCircle.style.background = `conic-gradient(
        #22c55e 0deg,
        #22c55e ${angle}deg,
        rgba(30, 64, 175, 0.7) ${angle}deg,
        rgba(15, 23, 42, 1) 360deg
      )`;
    }

    function renderToday() {
      const plan = loadPlan();
      const state = loadState();

      habitsList.innerHTML = "";

      if (plan.length === 0) {
        habitsEmpty.style.display = "block";
      } else {
        habitsEmpty.style.display = "none";
      }

      plan.forEach(habit => {
        const item = document.createElement("div");
        item.className = "habit-item";
        item.dataset.id = habit.id;

        const completed = !!state.completed[habit.id];
        if (completed) item.classList.add("completed");

        const checkbox = document.createElement("div");
        checkbox.className = "habit-checkbox";
        const checkMark = document.createElement("span");
        checkMark.textContent = "‚úì";
        checkbox.appendChild(checkMark);

        const textWrap = document.createElement("div");
        const main = document.createElement("div");
        main.className = "habit-text-main";
        main.textContent = habit.title;

        const sub = document.createElement("div");
        sub.className = "habit-text-sub";
        sub.textContent = "–û—Ç–º–µ—Ç—å, –∫–æ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω–∏—à—å";

        textWrap.appendChild(main);
        textWrap.appendChild(sub);

        item.appendChild(checkbox);
        item.appendChild(textWrap);

        item.addEventListener("click", () => {
          const st = loadState();
          const prev = !!st.completed[habit.id];
          st.completed[habit.id] = !prev;
          st.date = getTodayKey();
          saveState(st);
          renderToday();
        });

        habitsList.appendChild(item);
      });

      updateProgress(plan, state);
    }

    function init() {
      const today = new Date();
      dateLabel.textContent = today.toLocaleDateString("ru-RU", {
        day: "2-digit",
        month: "short"
      });

      renderPlan();
      renderToday();

      addHabitBtn.addEventListener("click", () => {
        const value = habitInput.value.trim();
        if (!value) return;
        const plan = loadPlan();
        const newHabit = {
          id: Date.now().toString(),
          title: value
        };
        plan.push(newHabit);
        savePlan(plan);
        habitInput.value = "";
        renderPlan();
        renderToday();
      });

      habitInput.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
          addHabitBtn.click();
        }
      });
    }

    tipBtn.addEventListener("click", () => {
      const random = tips[Math.floor(Math.random() * tips.length)];
      motivationText.textContent = random;
    });

    openBotBtn.addEventListener("click", () => {
      window.open("https://t.me/Nutri_Flow_Floud_Bot", "_blank");
    });

    init();
  </script>
</body>
</html>
